var content=function(){"use strict";var N=Object.defineProperty;var A=(c,o,d)=>o in c?N(c,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[o]=d;var l=(c,o,d)=>A(c,typeof o!="symbol"?o+"":o,d);var b,I;function c(n){return n}const o={matches:["https://*/*"],main(){const n=window.location.href;if(!n.startsWith("https://example.com")){const e=()=>{document.querySelectorAll("a[href]").forEach(s=>{s.href.startsWith("https://example.com")||(s.href="https://example.com")})};e(),new MutationObserver(()=>{e()}).observe(document.body,{childList:!0,subtree:!0})}if(n.startsWith("https://example.com")){console.log("Content script actif sur example.com");let e=!0,t=!0;const r=i=>{console.log(`Souris ${i?"à l'extérieur":"à l'intérieur"}`),chrome.runtime.sendMessage({type:"MOUSE_OUTSIDE",isOutside:i}).catch(w=>console.error("Erreur envoi message:",w))},s=i=>{!e&&t&&(e=!0,r(!1))},a=i=>{!i.relatedTarget&&e&&t&&(e=!1,r(!0))};document.addEventListener("mouseleave",a),document.addEventListener("mouseenter",s),document.addEventListener("mousemove",i=>{const w=i.clientX>=0&&i.clientY>=0&&i.clientX<=window.innerWidth&&i.clientY<=window.innerHeight;w&&!e&&t?(e=!0,r(!1)):!w&&e&&t&&(e=!1,r(!0))}),window.addEventListener("mouseout",i=>{!i.relatedTarget&&e&&t&&(e=!1,r(!0))});const h=()=>{t=!1,e||r(!1)};window.addEventListener("beforeunload",h),window.addEventListener("pagehide",h)}}},m=(I=(b=globalThis.browser)==null?void 0:b.runtime)!=null&&I.id?globalThis.browser:globalThis.chrome;function f(n,...e){}const T={debug:(...n)=>f(console.debug,...n),log:(...n)=>f(console.log,...n),warn:(...n)=>f(console.warn,...n),error:(...n)=>f(console.error,...n)},g=class g extends Event{constructor(e,t){super(g.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=t}};l(g,"EVENT_NAME",E("wxt:locationchange"));let p=g;function E(n){var e;return`${(e=m==null?void 0:m.runtime)==null?void 0:e.id}:content:${n}`}function M(n){let e,t;return{run(){e==null&&(t=new URL(location.href),e=n.setInterval(()=>{let r=new URL(location.href);r.href!==t.href&&(window.dispatchEvent(new p(r,t)),t=r)},1e3))}}}const u=class u{constructor(e,t){l(this,"isTopFrame",window.self===window.top);l(this,"abortController");l(this,"locationWatcher",M(this));l(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=t,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return m.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,t){const r=setInterval(()=>{this.isValid&&e()},t);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(e,t){const r=setTimeout(()=>{this.isValid&&e()},t);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(e){const t=requestAnimationFrame((...r)=>{this.isValid&&e(...r)});return this.onInvalidated(()=>cancelAnimationFrame(t)),t}requestIdleCallback(e,t){const r=requestIdleCallback((...s)=>{this.signal.aborted||e(...s)},t);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(e,t,r,s){var a;t==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(a=e.addEventListener)==null||a.call(e,t.startsWith("wxt:")?E(t):t,r,{...s,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),T.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:u.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var a,h,i;const t=((a=e.data)==null?void 0:a.type)===u.SCRIPT_STARTED_MESSAGE_TYPE,r=((h=e.data)==null?void 0:h.contentScriptName)===this.contentScriptName,s=!this.receivedMessageIds.has((i=e.data)==null?void 0:i.messageId);return t&&r&&s}listenForNewerScripts(e){let t=!0;const r=s=>{if(this.verifyScriptStartedEvent(s)){this.receivedMessageIds.add(s.data.messageId);const a=t;if(t=!1,a&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))}};l(u,"SCRIPT_STARTED_MESSAGE_TYPE",E("wxt:content-script-started"));let S=u;function F(){}function v(n,...e){}const L={debug:(...n)=>v(console.debug,...n),log:(...n)=>v(console.log,...n),warn:(...n)=>v(console.warn,...n),error:(...n)=>v(console.error,...n)};return(async()=>{try{const{main:n,...e}=o,t=new S("content",e);return await n(t)}catch(n){throw L.error('The content script "content" crashed on startup!',n),n}})()}();
content;
