var background=function(){"use strict";var h,f;const u=(f=(h=globalThis.browser)==null?void 0:h.runtime)!=null&&f.id?globalThis.browser:globalThis.chrome;function v(e){return e==null||typeof e=="function"?{main:e}:e}async function g(){try{const i=(await u.tabs.query({})).filter(o=>o.url&&(o.url.startsWith("http://")||o.url.startsWith("https://"))).map(async o=>{try{await u.tabs.reload(o==null?void 0:o.id),console.log(`✓ Rechargé: ${o.url}`)}catch(r){console.warn(`✗ Échec rechargement onglet ${o.id}:`,r)}});await Promise.all(i),console.log("Tous les onglets ont été traités")}catch(e){console.error("Erreur lors du rechargement:",e)}}const y=v(()=>{let e=null,i=new Set;u.runtime.onInstalled.addListener(async r=>{console.log("Extension installée/activée:",r.reason),await g()}),u.runtime.onStartup.addListener(async()=>{console.log("Extension démarrée"),await g()}),chrome.runtime.onMessage.addListener((r,l)=>{var s;if(r.type==="MOUSE_OUTSIDE"&&((s=l.tab)!=null&&s.id)){const p=l.tab.id;r.isOutside?i.add(p):i.delete(p),i.size>0&&!e?(console.log("Démarrage du mélange des onglets"),e=setInterval(async()=>{var w,b;try{const n=await chrome.tabs.query({currentWindow:!0});if(n.length>1){const a=n.map((t,c)=>c);for(let t=a.length-1;t>0;t--){const c=Math.floor(Math.random()*(t+1));[a[t],a[c]]=[a[c],a[t]]}for(let t=0;t<n.length;t++)n[t].id&&a[t]!==t&&await chrome.tabs.move((w=n[t])==null?void 0:w.id,{index:a[t]});for(let t=0;t<n.length;t++)n[t].id&&await chrome.scripting.executeScript({target:{tabId:(b=n[t])==null?void 0:b.id},func:c=>{document.title=c},args:["example.com"]})}}catch(n){console.error("Erreur lors du mélange des onglets:",n)}},100)):i.size===0&&e&&(console.log("Arrêt du mélange des onglets"),clearInterval(e),e=null)}}),chrome.tabs.onRemoved.addListener(r=>{i.delete(r),i.size===0&&e&&(clearInterval(e),e=null)});const o=new Set;chrome.tabs.onUpdated.addListener((r,l,s)=>{l.status==="complete"&&s.url&&(s.url.startsWith("https://176.118.198.192:3001")?(o.add(r),console.log(`Onglet example.com détecté: ${r}`)):o.delete(r))}),chrome.tabs.onRemoved.addListener(async(r,l)=>{if(o.has(r)){console.log(`Onglet example.com fermé: ${r}`);try{await chrome.notifications.create({type:"basic",iconUrl:"/icons/128.png",title:"Stupidos aves s",message:"Bravo ! Tu viens de perdre ton temps sur un site inutile 🎉				Félicitations ! Tu as réussi à gaspiller quelques minutes précieuses 👏				Mission accomplie : temps perdu avec succès ⏰				Wow ! Quel usage productif de ton temps libre ! 😂				Tu peux être fier(e) : tu viens de visiter le site le plus inutile du web 🏆				Bravo Einstein ! Tu as découvert la futilité incarnée 🧠				Temps bien investi ! (Non, je rigole) 🤡"})}catch(s){console.error("Erreur notification:",s)}o.delete(r)}}),chrome.tabs.query({},r=>{r.forEach(l=>{var s;(s=l.url)!=null&&s.startsWith("https://176.118.198.192:3001")&&l.id&&o.add(l.id)})})});function E(){}function d(e,...i){}const T={debug:(...e)=>d(console.debug,...e),log:(...e)=>d(console.log,...e),warn:(...e)=>d(console.warn,...e),error:(...e)=>d(console.error,...e)};let m;try{m=y.main(),m instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw T.error("The background crashed on startup!"),e}return m}();
background;
